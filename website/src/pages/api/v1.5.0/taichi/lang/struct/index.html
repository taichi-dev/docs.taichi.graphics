<!DOCTYPE html>

<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="generator" content="Docutils 0.19: https://docutils.sourceforge.io/" />

    <title>taichi.lang.struct &#8212; taichi-api-docstring  documentation</title>
    
  <link href="../../../../_static/css/theme.css" rel="stylesheet">
  <link href="../../../../_static/css/index.ff1ffe594081f20da1ef19478df9384b.css" rel="stylesheet">

    
  <link rel="stylesheet"
    href="../../../../_static/vendor/fontawesome/5.13.0/css/all.min.css">
  <link rel="preload" as="font" type="font/woff2" crossorigin
    href="../../../../_static/vendor/fontawesome/5.13.0/webfonts/fa-solid-900.woff2">
  <link rel="preload" as="font" type="font/woff2" crossorigin
    href="../../../../_static/vendor/fontawesome/5.13.0/webfonts/fa-brands-400.woff2">

    
      

    
    <link rel="stylesheet" type="text/css" href="../../../../_static/pygments.css" />
    <link rel="stylesheet" type="text/css" href="../../../../_static/css/blank.css" />
    <link rel="stylesheet" type="text/css" href="../../../../_static/graphviz.css" />
    
  <link rel="preload" as="script" href="../../../../_static/js/index.be7d3bbb2ef33a8344ce.js">

    <script data-url_root="../../../../" id="documentation_options" src="../../../../_static/documentation_options.js"></script>
    <script src="../../../../_static/doctools.js"></script>
    <script src="../../../../_static/sphinx_highlight.js"></script>
    <link rel="index" title="Index" href="../../../../genindex/" />
    <link rel="search" title="Search" href="../../../../search/" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <meta name="docsearch:language" content="en">
    <meta name="docsearch:category" content="API Reference">
    

    <!-- Google Analytics -->
    
  </head>
  <body data-spy="scroll" data-target="#bd-toc-nav" data-offset="80">
    
    <div class="container-fluid" id="banner"></div>

    
    <nav class="navbar navbar-light navbar-expand-lg bg-light fixed-top bd-navbar" id="navbar-main"><div class="container-xl">

  <div id="navbar-start">
    
    
<a class="navbar-brand" href="../../../../">
<p class="title">taichi-api-docstring</p>
</a>

    
  </div>

  <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbar-collapsible" aria-controls="navbar-collapsible" aria-expanded="false" aria-label="Toggle navigation">
    <span class="navbar-toggler-icon"></span>
  </button>

  
  <div id="navbar-collapsible" class=" collapse navbar-collapse">
    <div id="navbar-center" class="ml-auto">
      
      <div class="navbar-center-item">
        <ul id="navbar-main-elements" class="navbar-nav">
    <li class="toctree-l1 nav-item">
 <a class="reference internal nav-link" href="../../../">
  Taichi Language’s API reference
 </a>
</li>

    
    <li class="nav-item">
        <a class="nav-link nav-external" href="https://docs.taichi.graphics">Taichi Documentation Site<i class="fas fa-external-link-alt"></i></a>
    </li>
    
</ul>
      </div>
      
    </div>

    <div id="navbar-end">
      
      <div class="navbar-end-item">
        <ul id="navbar-icon-links" class="navbar-nav" aria-label="Icon Links">
        <li class="nav-item">
          <a class="nav-link" href="https://github.com/taichi-dev/taichi" rel="noopener" target="_blank" title="GitHub">
            <span><i class="fab fa-github"></i></span>
            <label class="sr-only">GitHub</label>
          </a>
        </li>
      </ul>
      </div>
      
    </div>
  </div>
</div>
    </nav>
    

    <div class="container-xl autoapi-container">
      <div class="row">
          
            
            <!-- Only show if we have sidebars configured, else just a small margin  -->
            <div class="col-12 col-md-3 bd-sidebar">
              <div class="sidebar-start-items">

  <div class="rst-versions" data-toggle="rst-versions" role="note" aria-label="versions">
    <span class="rst-current-version" data-toggle="rst-current-version">
      <span class="dropdown show">
        <a class="dropdown-toggle" role="button" id="dropdownMenuLink" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
          v1.5.0
        </a>
        <div class="dropdown-menu" aria-labelledby="dropdownMenuLink">
          
            
            <a class="dropdown-item" href="/api/master/">master</a>
            
          
             <strong> 
            <a class="dropdown-item" href="/api/">v1.5.0</a>
             </strong> 
          
            
            <a class="dropdown-item" href="/api/v1.4.1/">v1.4.1</a>
            
          
        </div>
      </span>
    </span>
  </div>
<nav class="bd-links" id="bd-docs-nav" aria-label="Main navigation">
  <div class="bd-toc-item active">
    <!--  -->

    <ul class="nav bd-sidenav">
 <li class="toctree-l1 has-children">
  <a class="reference internal" href="../../../">
   Taichi Language’s API reference
  </a>
  <input class="toctree-checkbox" id="toctree-checkbox-1" name="toctree-checkbox-1" type="checkbox"/>
  <label for="toctree-checkbox-1">
   <i class="fas fa-chevron-down">
   </i>
  </label>
  <ul>
   <li class="toctree-l2">
    <a class="reference internal" href="../../">
     taichi: The main taichi module
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../../ad/">
     taichi.ad: Taichi Autodiff system
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../../aot/">
     taichi.aot: Taichi AOT system
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../../linalg/">
     taichi.linalg: Taichi Linear algebra library
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../../math/">
     taichi.math: Taichi math library
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../../profiler/">
     taichi.profiler: Taichi profiler tools
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../../tools/">
     taichi.tools: Miscellaneous tools shipped with Taichi
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../../types/">
     taichi.types: Taichi types
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../../types/quant/">
     taichi.types.quant: Taichi quantized types
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../../ui/">
     taichi.ui: Taichi UI components (GUI and GGUI)
    </a>
   </li>
  </ul>
 </li>
</ul>

  </div>
</nav>
              </div>
              <div class="sidebar-end-items">
              </div>
            </div>
            
          

          
          <div class="d-none d-xl-block col-xl-2 bd-toc">
            
              
              <div class="toc-item">
                

<nav id="bd-toc-nav">
    <ul class="visible nav section-nav flex-column">
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#taichi.lang.struct.Struct">
   <code class="docutils literal notranslate">
    <span class="pre">
     Struct
    </span>
   </code>
  </a>
  <ul class="nav section-nav flex-column">
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#taichi.lang.struct.Struct.field">
     <code class="docutils literal notranslate">
      <span class="pre">
       Struct.field()
      </span>
     </code>
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#taichi.lang.struct.Struct.fill">
     <code class="docutils literal notranslate">
      <span class="pre">
       Struct.fill()
      </span>
     </code>
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#taichi.lang.struct.Struct.to_dict">
     <code class="docutils literal notranslate">
      <span class="pre">
       Struct.to_dict()
      </span>
     </code>
    </a>
   </li>
  </ul>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#taichi.lang.struct.StructField">
   <code class="docutils literal notranslate">
    <span class="pre">
     StructField
    </span>
   </code>
  </a>
  <ul class="nav section-nav flex-column">
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#taichi.lang.struct.StructField.copy_from">
     <code class="docutils literal notranslate">
      <span class="pre">
       StructField.copy_from()
      </span>
     </code>
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#taichi.lang.struct.StructField.fill">
     <code class="docutils literal notranslate">
      <span class="pre">
       StructField.fill()
      </span>
     </code>
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#taichi.lang.struct.StructField.from_numpy">
     <code class="docutils literal notranslate">
      <span class="pre">
       StructField.from_numpy()
      </span>
     </code>
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#taichi.lang.struct.StructField.from_paddle">
     <code class="docutils literal notranslate">
      <span class="pre">
       StructField.from_paddle()
      </span>
     </code>
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#taichi.lang.struct.StructField.from_torch">
     <code class="docutils literal notranslate">
      <span class="pre">
       StructField.from_torch()
      </span>
     </code>
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#taichi.lang.struct.StructField.get_member_field">
     <code class="docutils literal notranslate">
      <span class="pre">
       StructField.get_member_field()
      </span>
     </code>
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#taichi.lang.struct.StructField.to_numpy">
     <code class="docutils literal notranslate">
      <span class="pre">
       StructField.to_numpy()
      </span>
     </code>
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#taichi.lang.struct.StructField.to_paddle">
     <code class="docutils literal notranslate">
      <span class="pre">
       StructField.to_paddle()
      </span>
     </code>
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#taichi.lang.struct.StructField.to_torch">
     <code class="docutils literal notranslate">
      <span class="pre">
       StructField.to_torch()
      </span>
     </code>
    </a>
   </li>
  </ul>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#taichi.lang.struct.dataclass">
   <code class="docutils literal notranslate">
    <span class="pre">
     dataclass()
    </span>
   </code>
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#taichi.lang.struct.Struct">
   Struct
  </a>
  <ul class="nav section-nav flex-column">
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#taichi.lang.struct.Struct.field">
     field
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#taichi.lang.struct.Struct.fill">
     fill
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#taichi.lang.struct.Struct.to_dict">
     to_dict
    </a>
   </li>
  </ul>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#taichi.lang.struct.StructField">
   StructField
  </a>
  <ul class="nav section-nav flex-column">
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#taichi.lang.struct.StructField.copy_from">
     copy_from
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#taichi.lang.struct.StructField.fill">
     fill
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#taichi.lang.struct.StructField.from_numpy">
     from_numpy
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#taichi.lang.struct.StructField.from_paddle">
     from_paddle
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#taichi.lang.struct.StructField.from_torch">
     from_torch
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#taichi.lang.struct.StructField.get_member_field">
     get_member_field
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#taichi.lang.struct.StructField.to_numpy">
     to_numpy
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#taichi.lang.struct.StructField.to_paddle">
     to_paddle
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#taichi.lang.struct.StructField.to_torch">
     to_torch
    </a>
   </li>
  </ul>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#taichi.lang.struct.dataclass">
   dataclass
  </a>
 </li>
</ul>

</nav>
              </div>
              
              <div class="toc-item">
                
              </div>
              
            
          </div>
          

          
          
            
          
          <main class="col-12 col-md-9 col-xl-7 py-md-5 pl-md-5 pr-md-4 bd-content" role="main">
              
              <div>
                
  <section id="module-taichi.lang.struct">
<span id="taichi-lang-struct"></span><h1><a class="reference internal" href="#module-taichi.lang.struct" title="taichi.lang.struct"><code class="xref py py-mod docutils literal notranslate"><span class="pre">taichi.lang.struct</span></code></a><a class="headerlink" href="#module-taichi.lang.struct" title="Permalink to this heading">#</a></h1>
<dl class="py class">
<dt class="sig sig-object py" id="taichi.lang.struct.Struct">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">taichi.lang.struct.</span></span><span class="sig-name descname"><span class="pre">Struct</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="o"><span class="pre">*</span></span><span class="n"><span class="pre">args</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#taichi.lang.struct.Struct" title="Permalink to this definition">#</a></dt>
<dd><p>Bases: <a class="reference internal" href="../common_ops/#taichi.lang.common_ops.TaichiOperations" title="taichi.lang.common_ops.TaichiOperations"><code class="xref py py-obj docutils literal notranslate"><span class="pre">taichi.lang.common_ops.TaichiOperations</span></code></a></p>
<p>The Struct type class.</p>
<p>A struct is a dictionary-like data structure that stores members as
(key, value) pairs. Valid data members of a struct can be scalars,
matrices or other dictionary-like structures.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>entries</strong> (<em>Dict</em><em>[</em><em>str</em><em>, </em><em>Union</em><em>[</em><em>Dict</em><em>, </em><em>Expr</em><em>, </em><a class="reference internal" href="../../#taichi.Matrix" title="taichi.Matrix"><em>Matrix</em></a><em>, </em><a class="reference internal" href="#taichi.lang.struct.Struct" title="taichi.lang.struct.Struct"><em>Struct</em></a><em>]</em><em>]</em>) – keys and values for struct members. Entries can optionally
include a dictionary of functions with the key ‘__struct_methods’
which will be attached to the struct for executing on the struct data.</p>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>An instance of this struct.</p>
</dd>
</dl>
<p>Example:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>&gt;&gt;&gt; vec3 = ti.types.vector(3, ti.f32)
&gt;&gt;&gt; a = ti.Struct(v=vec3([0, 0, 0]), t=1.0)
&gt;&gt;&gt; print(a.items)
dict_items([(&#39;v&#39;, [0. 0. 0.]), (&#39;t&#39;, 1.0)])
&gt;&gt;&gt;
&gt;&gt;&gt; B = ti.Struct(v=vec3([0., 0., 0.]), t=1.0, A=a)
&gt;&gt;&gt; print(B.items)
dict_items([(&#39;v&#39;, [0. 0. 0.]), (&#39;t&#39;, 1.0), (&#39;A&#39;, {&#39;v&#39;: [[0.], [0.], [0.]], &#39;t&#39;: 1.0})])
</pre></div>
</div>
<dl class="py method">
<dt class="sig sig-object py" id="taichi.lang.struct.Struct.field">
<em class="property"><span class="pre">classmethod</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">field</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">cls</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">members</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">methods</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">{}</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">shape</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">name</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'&lt;Struct&gt;'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">offset</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">needs_grad</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">needs_dual</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">layout</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">Layout.AOS</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#taichi.lang.struct.Struct.field" title="Permalink to this definition">#</a></dt>
<dd><p>Creates a <a class="reference internal" href="../../#taichi.StructField" title="taichi.StructField"><code class="xref py py-class docutils literal notranslate"><span class="pre">StructField</span></code></a> with each element
has this struct as its type.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>members</strong> (<em>dict</em>) – a dict, each item is like <cite>name: type</cite>.</p></li>
<li><p><strong>methods</strong> (<em>dict</em>) – a dict of methods that should be included with
the field.  Each struct item of the field will have the
methods as instance functions.</p></li>
<li><p><strong>shape</strong> (<em>Tuple</em><em>[</em><em>int</em><em>]</em>) – width and height of the field.</p></li>
<li><p><strong>offset</strong> (<em>Tuple</em><em>[</em><em>int</em><em>]</em>) – offset of the indices of the created field.
For example if <cite>offset=(-10, -10)</cite> the indices of the field
will start at <cite>(-10, -10)</cite>, not <cite>(0, 0)</cite>.</p></li>
<li><p><strong>needs_grad</strong> (<em>bool</em>) – enabling grad field (reverse mode autodiff) or not.</p></li>
<li><p><strong>needs_dual</strong> (<em>bool</em>) – enabling dual field (forward mode autodiff) or not.</p></li>
<li><p><strong>layout</strong> – AOS or SOA.</p></li>
</ul>
</dd>
</dl>
<p class="rubric">Example</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">vec3</span> <span class="o">=</span> <span class="n">ti</span><span class="o">.</span><span class="n">types</span><span class="o">.</span><span class="n">vector</span><span class="p">(</span><span class="mi">3</span><span class="p">,</span> <span class="n">ti</span><span class="o">.</span><span class="n">f32</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">sphere</span> <span class="o">=</span> <span class="p">{</span><span class="s2">&quot;center&quot;</span><span class="p">:</span> <span class="n">vec3</span><span class="p">,</span> <span class="s2">&quot;radius&quot;</span><span class="p">:</span> <span class="nb">float</span><span class="p">}</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">F</span> <span class="o">=</span> <span class="n">ti</span><span class="o">.</span><span class="n">Struct</span><span class="o">.</span><span class="n">field</span><span class="p">(</span><span class="n">sphere</span><span class="p">,</span> <span class="n">shape</span><span class="o">=</span><span class="p">(</span><span class="mi">3</span><span class="p">,</span> <span class="mi">3</span><span class="p">))</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">F</span>
<span class="go">{&#39;center&#39;: array([[[0., 0., 0.],</span>
<span class="go">    [0., 0., 0.],</span>
<span class="go">    [0., 0., 0.]],</span>
</pre></div>
</div>
<blockquote>
<div><dl class="simple">
<dt>[[0., 0., 0.],</dt><dd><p>[0., 0., 0.],
[0., 0., 0.]],</p>
</dd>
<dt>[[0., 0., 0.],</dt><dd><p>[0., 0., 0.],
[0., 0., 0.]]], dtype=float32), ‘radius’: array([[0., 0., 0.],</p>
</dd>
</dl>
<p>[0., 0., 0.],
[0., 0., 0.]], dtype=float32)}</p>
</div></blockquote>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="taichi.lang.struct.Struct.fill">
<span class="sig-name descname"><span class="pre">fill</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">self</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">val</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#taichi.lang.struct.Struct.fill" title="Permalink to this definition">#</a></dt>
<dd><p>Fills the Struct with a specific value in Taichi scope.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>val</strong> (<em>Union</em><em>[</em><em>int</em><em>, </em><em>float</em><em>]</em>) – Value to fill.</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="taichi.lang.struct.Struct.to_dict">
<span class="sig-name descname"><span class="pre">to_dict</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">self</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">include_methods</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">include_ndim</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#taichi.lang.struct.Struct.to_dict" title="Permalink to this definition">#</a></dt>
<dd><p>Converts the Struct to a dictionary.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>include_methods</strong> (<em>bool</em>) – Whether any struct methods should be included
in the result dictionary under the key ‘__struct_methods’.</p>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>The result dictionary.</p>
</dd>
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p>Dict</p>
</dd>
</dl>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="taichi.lang.struct.StructField">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">taichi.lang.struct.</span></span><span class="sig-name descname"><span class="pre">StructField</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">field_dict</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">struct_methods</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">name</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">is_primal</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">True</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#taichi.lang.struct.StructField" title="Permalink to this definition">#</a></dt>
<dd><p>Bases: <a class="reference internal" href="../field/#taichi.lang.field.Field" title="taichi.lang.field.Field"><code class="xref py py-obj docutils literal notranslate"><span class="pre">taichi.lang.field.Field</span></code></a></p>
<p>Taichi struct field with SNode implementation.</p>
<blockquote>
<div><p>Instead of directly constraining Expr entries, the StructField object
directly hosts members as <cite>Field</cite> instances to support nested structs.</p>
</div></blockquote>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>field_dict</strong> (<em>Dict</em><em>[</em><em>str</em><em>, </em><a class="reference internal" href="../../aot/conventions/gfxruntime140/sr/#taichi.aot.conventions.gfxruntime140.sr.Field" title="taichi.aot.conventions.gfxruntime140.sr.Field"><em>Field</em></a><em>]</em>) – Struct field members.</p></li>
<li><p><strong>struct_methods</strong> (<em>Dict</em><em>[</em><em>str</em><em>, </em><em>callable</em><em>]</em>) – Dictionary of functions to apply
to each struct instance in the field.</p></li>
<li><p><strong>name</strong> (<em>string</em><em>, </em><em>optional</em>) – The custom name of the field.</p></li>
</ul>
</dd>
</dl>
<dl class="py method">
<dt class="sig sig-object py" id="taichi.lang.struct.StructField.copy_from">
<span class="sig-name descname"><span class="pre">copy_from</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">self</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">other</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#taichi.lang.struct.StructField.copy_from" title="Permalink to this definition">#</a></dt>
<dd><p>Copies all elements from another field.</p>
<p>The shape of the other field needs to be the same as <cite>self</cite>.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>other</strong> (<a class="reference internal" href="../../aot/conventions/gfxruntime140/sr/#taichi.aot.conventions.gfxruntime140.sr.Field" title="taichi.aot.conventions.gfxruntime140.sr.Field"><em>Field</em></a>) – The source field.</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="taichi.lang.struct.StructField.fill">
<span class="sig-name descname"><span class="pre">fill</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">self</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">val</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#taichi.lang.struct.StructField.fill" title="Permalink to this definition">#</a></dt>
<dd><p>Fills this struct field with a specified value.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>val</strong> (<em>Union</em><em>[</em><em>int</em><em>, </em><em>float</em><em>]</em>) – Value to fill.</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="taichi.lang.struct.StructField.from_numpy">
<span class="sig-name descname"><span class="pre">from_numpy</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">self</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">array_dict</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#taichi.lang.struct.StructField.from_numpy" title="Permalink to this definition">#</a></dt>
<dd><p>Copies the data from a set of <cite>numpy.array</cite> into this field.</p>
<p>The argument <cite>array_dict</cite> must be a dictionay-like object, it
contains all the keys in this field and the copying process
between corresponding items can be performed.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="taichi.lang.struct.StructField.from_paddle">
<span class="sig-name descname"><span class="pre">from_paddle</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">self</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">array_dict</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#taichi.lang.struct.StructField.from_paddle" title="Permalink to this definition">#</a></dt>
<dd><p>Copies the data from a set of <cite>paddle.Tensor</cite> into this field.</p>
<p>The argument <cite>array_dict</cite> must be a dictionay-like object, it
contains all the keys in this field and the copying process
between corresponding items can be performed.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="taichi.lang.struct.StructField.from_torch">
<span class="sig-name descname"><span class="pre">from_torch</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">self</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">array_dict</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#taichi.lang.struct.StructField.from_torch" title="Permalink to this definition">#</a></dt>
<dd><p>Copies the data from a set of <cite>torch.tensor</cite> into this field.</p>
<p>The argument <cite>array_dict</cite> must be a dictionay-like object, it
contains all the keys in this field and the copying process
between corresponding items can be performed.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="taichi.lang.struct.StructField.get_member_field">
<span class="sig-name descname"><span class="pre">get_member_field</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">self</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">key</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#taichi.lang.struct.StructField.get_member_field" title="Permalink to this definition">#</a></dt>
<dd><p>Creates a ScalarField using a specific field member.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>key</strong> (<em>str</em>) – Specified key of the field member.</p>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>The result ScalarField.</p>
</dd>
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p><a class="reference internal" href="../../#taichi.ScalarField" title="taichi.ScalarField">ScalarField</a></p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="taichi.lang.struct.StructField.to_numpy">
<span class="sig-name descname"><span class="pre">to_numpy</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">self</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#taichi.lang.struct.StructField.to_numpy" title="Permalink to this definition">#</a></dt>
<dd><p>Converts the Struct field instance to a dictionary of NumPy arrays.</p>
<p>The dictionary may be nested when converting nested structs.</p>
<dl class="field-list simple">
<dt class="field-odd">Returns<span class="colon">:</span></dt>
<dd class="field-odd"><p>The result NumPy array.</p>
</dd>
<dt class="field-even">Return type<span class="colon">:</span></dt>
<dd class="field-even"><p>Dict[str, Union[numpy.ndarray, Dict]]</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="taichi.lang.struct.StructField.to_paddle">
<span class="sig-name descname"><span class="pre">to_paddle</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">self</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">place</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#taichi.lang.struct.StructField.to_paddle" title="Permalink to this definition">#</a></dt>
<dd><p>Converts the Struct field instance to a dictionary of Paddle tensors.</p>
<p>The dictionary may be nested when converting nested structs.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>place</strong> (<em>paddle.CPUPlace</em><em>(</em><em>)</em><em>/CUDAPlace</em><em>(</em><em>n</em><em>)</em><em>, </em><em>optional</em>) – The
desired place of returned tensor.</p>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p><dl class="simple">
<dt>The result</dt><dd><p>Paddle tensor.</p>
</dd>
</dl>
</p>
</dd>
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p>Dict[str, Union[paddle.Tensor, Dict]]</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="taichi.lang.struct.StructField.to_torch">
<span class="sig-name descname"><span class="pre">to_torch</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">self</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">device</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#taichi.lang.struct.StructField.to_torch" title="Permalink to this definition">#</a></dt>
<dd><p>Converts the Struct field instance to a dictionary of PyTorch tensors.</p>
<p>The dictionary may be nested when converting nested structs.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>device</strong> (<em>torch.device</em><em>, </em><em>optional</em>) – The
desired device of returned tensor.</p>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p><dl class="simple">
<dt>The result</dt><dd><p>PyTorch tensor.</p>
</dd>
</dl>
</p>
</dd>
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p>Dict[str, Union[torch.Tensor, Dict]]</p>
</dd>
</dl>
</dd></dl>

</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="taichi.lang.struct.dataclass">
<span class="sig-prename descclassname"><span class="pre">taichi.lang.struct.</span></span><span class="sig-name descname"><span class="pre">dataclass</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">cls</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#taichi.lang.struct.dataclass" title="Permalink to this definition">#</a></dt>
<dd><p>Converts a class with field annotations and methods into a taichi struct type.</p>
<p>This will return a normal custom struct type, with the functions added to it.
Struct fields can be generated in the normal way from the struct type.
Functions in the class can be run on the struct instance.</p>
<dl class="simple">
<dt>This class decorator inspects the class for annotations and methods and</dt><dd><ol class="arabic simple">
<li><p>Sets the annotations as fields for the struct</p></li>
<li><p>Attaches the methods to the struct type</p></li>
</ol>
</dd>
</dl>
<p>Example:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>&gt;&gt;&gt; @ti.dataclass
&gt;&gt;&gt; class Sphere:
&gt;&gt;&gt;     center: vec3
&gt;&gt;&gt;     radius: ti.f32
&gt;&gt;&gt;
&gt;&gt;&gt;     @ti.func
&gt;&gt;&gt;     def area(self):
&gt;&gt;&gt;         return 4 * 3.14 * self.radius * self.radius
&gt;&gt;&gt;
&gt;&gt;&gt; my_spheres = Sphere.field(shape=(n, ))
&gt;&gt;&gt; my_sphere[2].area()
</pre></div>
</div>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>cls</strong> (<em>Class</em>) – the class with annotations and methods to convert to a struct</p>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p><dl class="simple">
<dt>A taichi struct with the annotations as fields</dt><dd><p>and methods from the class attached.</p>
</dd>
</dl>
</p>
</dd>
</dl>
</dd></dl>

</section>


              </div>
              
              
              <!-- Previous / next buttons -->
<div class='prev-next-area'>
</div>
              
          </main>
          

      </div>
    </div>
  
  <script src="../../../../_static/js/index.be7d3bbb2ef33a8344ce.js"></script>
<footer class="footer mt-5 mt-md-0">
  <div class="container">
    
    <div class="footer-item">
      <p class="copyright">
    &copy; Copyright 2022, Taichi Graphics.<br>
</p>
    </div>
    
    <div class="footer-item">
      <p class="sphinx-version">
Created using <a href="http://sphinx-doc.org/">Sphinx</a> 7.0.0.<br>
</p>
    </div>
    
  </div>
</footer>
  </body>
</html>